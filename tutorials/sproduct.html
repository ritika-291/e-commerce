<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECommerce tutorial</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>

    <section id="header">
        <a href="#"><img src="img/logo.png" class="logo" alt=""></a>

        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a class="active"  href="shop.html">Shop</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li id="lg-bag"><a href="Cart.html"><i class="fa-solid fa-bag-shopping"></i></a></li>
                <a href="#" id="close"><i class="far fa-times"></i> </a>
            </ul>
        </div>
        <div id="mobile">
            <li><a href="Cart"><i class="fa-solid fa-bag-shopping"></i></a></li>
            <i id="bar" class="fas fa-outdent"></i>
        </div>
    </section>
<section id="prodetails" class="section-p1">
    <div class="single-pro-image">
        <img src="img/f1.jpg" width="100%" id="MainImg">
        <div class="small-img-group">
            <div class="small-img-col">
                <img src="img/f1.jpg" width="100%" class="small-img">
            </div>
            <div class="small-img-col">
                <img src="img/f2.jpg" width="100%" class="small-img">
            </div>
            <div class="small-img-col">
                <img src="img/f3.jpg" width="100%" class="small-img">
            </div>
            <div class="small-img-col">
                <img src="img/f4.jpg" width="100%" class="small-img">
            </div>
            
        </div>
    </div>
    <div class="single-pro-details">
        <h6>Home /T-shirt</h6>
        <h4>Men's Fashion T Shirt</h4>
        <h2>$139.00</h2>
        <select>
            <option>select size</option>
            <option>XL</option>
            <option>XXL</option>
            <option>Small</option>
            <option>Large</option>
        </select>
        <input type="number" value="1">
        <button class="normal"> Add To Cart</button>
        <h4>product details</h4>
        <span>the gildan ultra cotton t-shirt is maf=de from a substantial 6.0 oz prodetailssq.yard
            fabric constructed from 100% cotton this classic fit pressrunk jersey init provides unmatched comfort with each wear.

        </span>
    </div>
</section>
<section id="product1" class="section-p1">
    <h2>New Arrivals</h2>
    <p>summer collection new morden design</p>
    <div class="pro-container">
    <div class="pro">
        <img src="img/n1.jpg">
        <div class="des">
            <span>adidas</span>
            <h5>Cartoon Astronaut t-shirts</h5>
            <div class="star">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
            </div>
            <h4>$78</h4>
        </div>
        <a href="#"><i class="fa-solid fa-cart-shopping"></i></a>
    </div>

    <div class="pro" onclick="window.location.href='sproduct.html';">
        <img src="img/n2.jpg">
        <div class="des">
            <span>adidas</span>
            <h5>Cartoon Astronaut t-shirts</h5>
            <div class="star">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
            </div>
            <h4>$78</h4>
        </div>
        <a href="#"><i class="fa-solid fa-cart-shopping"></i></a>
    </div>

    <div class="pro" onclick="window.location.href='sproduct.html';">
        <img src="img/n3.jpg">
        <div class="des">
            <span>adidas</span>
            <h5>Cartoon Astronaut t-shirts</h5>
            <div class="star">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
            </div>
            <h4>$78</h4>
        </div>
        <a href="#"><i class="fa-solid fa-cart-shopping"></i></a>
    </div>

    <div class="pro" onclick="window.location.href='sproduct.html';">
        <img src="img/n4.jpg">
        <div class="des">
            <span>adidas</span>
            <h5>Cartoon Astronaut t-shirts</h5>
            <div class="star">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
            </div>
            <h4>$78</h4>
        </div>
        <a href="#"><i class="fa-solid fa-cart-shopping"></i></a>
    </div>


      


</div>

</section>


<section id="newsletter" class="section-p1 section-m1">
    <div class="newstext">
        <h4>Sign up for newsletters</h4>
        <p>Get e-mail updates about our latest shop and <span>special offers.</span></p>
    </div>
    <div class="form">
        <input type="text" placeholder="your email address">
        <button class="normal">sign up</button>
    </div>
</section>

<footer class="section-p1">
    <div class="col">
        <img class="logo" src="img/logo.png">
        <h4>Contact</h4>
        <p><strong>Address:</strong> 562 wellington , street 32 , san francisco</p>
        <p><strong>Phone:</strong> +01 2222 365 / (+91) 01 2345 6789</p>
        <p><strong>Hours:</strong> 10:00 -18:00 , Mon - Sat</p>
        <div class="follow">
            <h4>Follow us</h4>
            <div class="icons">
                <i class="fa-brands fa-facebook"></i>
                <i class="fa-brands fa-twitter"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-pinterest"></i>
                <i class="fa-brands fa-youtube"></i>
            </div>
        </div>
    </div>
    <div class="col">
        <h4>About</h4>
        <a href="#">About Us</a>
        <a href="#">Delivery Information</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Tearms & Condition</a>
        <a href="#">Contact Us</a>
    </div>
    <div class="col">
        <h4>my account</h4>
        <a href="#">Sign in</a>
        <a href="#">view cart</a>
        <a href="#">my wishlist</a>
        <a href="#">Track my order</a>
        <a href="#">help</a>
    </div>
    <div class="col install">
        <h4>Install App</h4>
        <p> from app store or google play</p>
        <div class="row">
            <img src="img/app.jpg">
            <img src="img/play.jpg">
        </div>
        <p>Secured payment gateways</p>
        <img src="img/pay.png">
    </div>
    <div class="copyright">
        <p>@ 2021, tech2 etc -html css ecommerce template</p>
    </div>
</footer>

<script>
    var MainImg=document.getElementById("MainImg");
    var smallimg =document.getElementsByClassName("small-img");

    smallimg[0].onclick =function(){
        MainImg.src=smallimg[0].src;
    }
    smallimg[1].onclick =function(){
        MainImg.src=smallimg[1].src;
    }
    smallimg[2].onclick =function(){
        MainImg.src=smallimg[2].src;
    }
    smallimg[3].onclick =function(){
        MainImg.src=smallimg[3].src;
    }
    </script>

    <script src="script.js"></script>

    <script>
        const userEmail = localStorage.getItem('userEmail');

        document.querySelector('.normal').addEventListener('click', async (e) => {
            e.preventDefault();
            
            if (!userEmail) {
                sessionStorage.setItem('previousPage', window.location.href);
                window.location.href = '/login.html';
                return;
            }

            const product = {
                productId: window.location.search.split('=')[1] || Date.now().toString(),
                name: document.querySelector('h4').textContent,
                price: parseFloat(document.querySelector('h2').textContent.replace('$', '')),
                image: document.getElementById('MainImg').src,
                quantity: parseInt(document.querySelector('input[type="number"]').value || 1)
            };

            try {
                const response = await fetch('/add-to-cart', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: userEmail,
                        product: product
                    })
                });

                const data = await response.json();
                if (response.ok) {
                    const message = document.createElement('div');
                    message.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #4CAF50; color: white; padding: 15px; border-radius: 5px; z-index: 1000;';
                    message.textContent = 'Product added to cart!';
                    document.body.appendChild(message);
                    setTimeout(() => message.remove(), 3000);
                } else {
                    alert('Error adding to cart');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error adding to cart');
            }
        });
    </script>
</body>
</html>